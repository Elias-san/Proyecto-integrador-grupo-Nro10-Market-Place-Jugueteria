<!DOCTYPE html>
<html lang="es">

    <%-include('../partials/head') %>
    <title>Register</title>
<body>
    <%- include('../partials/header')%>
    <section class="container main">
     
        <!-- Register-Form -->
	<div class="container" style="margin-top:30px; margin-bottom: 30px;">
		<div class="row justify-content-center">
			<div class="col-md-10">
				<h2>Formulario de registro</h2>

				<% if (typeof errors !== 'undefined') { %>
				<ul>
					<% for(let oneError of errors) { %>
					<li class="text-danger"> <%= oneError.msg %> </li>
					<% } %>
				</ul>
				<% } %>

				<form method="POST" action="/users/register" enctype="multipart/form-data">
					<div class="row">
						<div class="col-md-6">
							<div class="form-group">
								<label><b>Nombre:</b></label>
								<input 
									type="text" 
									name="name" 
									class="form-control
									<% if (typeof hasErrorGetMessage !== 'undefined') { %>
										<%= hasErrorGetMessage('name', errors) ? 'is-invalid' : null %> 
									<% } %>
									"
									value="<%= typeof oldData !== 'undefined' ? oldData.name : null %>"
								>
								<i class="invalid-feedback">
									<% if (typeof hasErrorGetMessage !== 'undefined') { %>
										<%= hasErrorGetMessage('name', errors) ? hasErrorGetMessage('name', errors) : null %>
									<% } %>
								</i>
							</div>
                                                </div>
                                                
                                                <div class="col-md-6">
							<div class="form-group">
								<label><b>Apellido:</b></label>
								<input 
									type="text" 
									name="surname" 
									class="form-control
									<% if (typeof hasErrorGetMessage !== 'undefined') { %>
										<%= hasErrorGetMessage('surname', errors) ? 'is-invalid' : null %> 
									<% } %>
									"
									value="<%= typeof oldData !== 'undefined' ? oldData.surname : null %>"
								>
								<i class="invalid-feedback">
									<% if (typeof hasErrorGetMessage !== 'undefined') { %>
										<%= hasErrorGetMessage('surname', errors) ? hasErrorGetMessage('surname', errors) : null %>
									<% } %>
								</i>
							</div>
                                                </div>
                                                
                                                <div class="col-md-6">
							<div class="form-group">
								<label><b>Usuario:</b></label>
								<input 
									type="text" 
									name="user" 
									class="form-control
									<% if (typeof hasErrorGetMessage !== 'undefined') { %>
										<%= hasErrorGetMessage('user', errors) ? 'is-invalid' : null %> 
									<% } %>
									"
									value="<%= typeof oldData !== 'undefined' ? oldData.user : null %>"
								>
								<i class="invalid-feedback">
									<% if (typeof hasErrorGetMessage !== 'undefined') { %>
										<%= hasErrorGetMessage('user', errors) ? hasErrorGetMessage('user', errors) : null %>
									<% } %>
								</i>
							</div>
						</div>
						<div class="col-md-6">
							<div class="form-group">
								<label><b>Correo electrónico:</b></label>
								<input 
									type="text" 
									name="email" 
									class="form-control
									<% if (typeof hasErrorGetMessage !== 'undefined') { %>
										<%= hasErrorGetMessage('email', errors) ? 'is-invalid' : null %> 
									<% } %>
									"
									value="<%= typeof oldData !== 'undefined' ? oldData.email : null %>"
								>
								<i class="invalid-feedback">
									<% if (typeof hasErrorGetMessage !== 'undefined') { %>
									<%= hasErrorGetMessage('email', errors) ? hasErrorGetMessage('email', errors) : null %>
									<% } %>
								</i>
							</div>
						</div>
						<div class="col-md-6">
							<div class="form-group">
								<label><b>Password:</b></label>
								<input 
									type="password" 
									name="password" 
									class="form-control
									<% if (typeof hasErrorGetMessage !== 'undefined') { %>
										<%= hasErrorGetMessage('password', errors) ? 'is-invalid' : null %> 
									<% } %>
									"
								>
								<i class="invalid-feedback">
									<% if (typeof hasErrorGetMessage !== 'undefined') { %>
									<%= hasErrorGetMessage('password', errors) ? hasErrorGetMessage('password', errors) : null %>
									<% } %>
								</i>
							</div>
						</div>
					
						<div class="col-md-6">
							<div class="form-group">
								<label><b>País de nacimiento:</b></label>
								<select 
									name="country" 
                                                                        class="form-control
                                                                        <% if (typeof hasErrorGetMessage !== 'undefined') { %>
										<%= hasErrorGetMessage('country', errors) ? 'is-invalid' : null %> 
									<% } %>
                                                                        "
								>
									<option value="">Elegí un país</option>
									<%  
										let countries = [
											{code: 'Arg', name: 'Argentina'},
											{code: 'Bol', name: 'Bolivia'},
											{code: 'Bra', name: 'Brasil'},
											{code: 'Col', name: 'Colombia'},
											{code: 'Chi', name: 'Chile'},
											{code: 'Ecu', name: 'Ecuador'},
											{code: 'Par', name: 'Paraguay'},
											{code: 'Per', name: 'Perú'},
											{code: 'Uru', name: 'Uruguay'},
											{code: 'Ven', name: 'Venezuela'},
										];
									%>
									<% for (const oneCountry of countries) { %>
										<option value="<%= oneCountry.code %>"> 
											<%= oneCountry.name %> 
										</option>
									<% } %>
                                                                </select>
                                                                <i class="invalid-feedback">
									<% if (typeof hasErrorGetMessage !== 'undefined') { %>
									<%= hasErrorGetMessage('country', errors) ? hasErrorGetMessage('country', errors) : null %>
									<% } %>
								</i>
							</div>
						</div>
						<div class="col-md-6">
							<div class="form-group">
								<label><b>Imagen de perfil:</b></label>
								<div class="custom-file">
									<input 
										type="file" 
										name="user_avatar"
										class="custom-file-input
										<% if (typeof hasErrorGetMessage !== 'undefined') { %>
											<%= hasErrorGetMessage('user_avatar', errors) ? 'is-invalid' : null %> 
										<% } %>
										"
									>
									<label class="custom-file-label">Choose file...</label>
									<i class="invalid-feedback">
										<% if (typeof hasErrorGetMessage !== 'undefined') { %>
										<%= hasErrorGetMessage('user_avatar', errors) ? hasErrorGetMessage('user_avatar', errors) : null %>
										<% } %>
									</i>
								</div>
							</div>
						</div>
						<div class="col-12">
							<button type="submit" class="btn btn-primary">Registrarse</button>
						</div>
					</div>
				</form>
			</div>
		</div>
        </div>
        
	
    </section>

    <%- include('../partials/footer')%>

      <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="/js/bootstrap.min.js" ></script>
</body>
</html>